!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var r=t();for(var n in r)("object"==typeof exports?exports:e)[n]=r[n]}}(window,function(){return function(e){var t={};function r(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,r),o.l=!0,o.exports}return r.m=e,r.c=t,r.d=function(e,t,n){r.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},r.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},r.t=function(e,t){if(1&t&&(e=r(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(r.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var o in e)r.d(n,o,function(t){return e[t]}.bind(null,o));return n},r.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return r.d(t,"a",t),t},r.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},r.p="",r(r.s=208)}({10:function(e,t){e.exports={ANGLE:"angle",BOOLEAN:"Boolean",COLOR:"color",NUMBER:"number",STRING:"string",MATRIX:"matrix",NOTE:"note",IMAGE:"image"}},11:function(e,t){e.exports={BOOLEAN:"Boolean",BUTTON:"button",COMMAND:"command",CONDITIONAL:"conditional",EVENT:"event",HAT:"hat",LOOP:"loop",REPORTER:"reporter"}},12:function(e,t){function r(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var n=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,n){t&&r(e.prototype,t),n&&r(e,n)}(e,null,[{key:"decimalToHex",value:function(e){e<0&&(e+=16777216);var t=Number(e).toString(16);return t="#".concat("000000".substr(0,6-t.length)).concat(t)}},{key:"decimalToRgb",value:function(e){var t=e>>24&255;return{r:e>>16&255,g:e>>8&255,b:255&e,a:t>0?t:255}}},{key:"hexToRgb",value:function(e){e=e.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,r,n){return t+t+r+r+n+n});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(e);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}},{key:"rgbToHex",value:function(t){return e.decimalToHex(e.rgbToDecimal(t))}},{key:"rgbToDecimal",value:function(e){return(e.r<<16)+(e.g<<8)+e.b}},{key:"hexToDecimal",value:function(t){return e.rgbToDecimal(e.hexToRgb(t))}},{key:"hsvToRgb",value:function(e){var t=e.h%360;t<0&&(t+=360);var r,n,o,a=Math.max(0,Math.min(e.s,1)),i=Math.max(0,Math.min(e.v,1)),u=Math.floor(t/60),c=t/60-u,s=i*(1-a),f=i*(1-a*c),l=i*(1-a*(1-c));switch(u){default:case 0:r=i,n=l,o=s;break;case 1:r=f,n=i,o=s;break;case 2:r=s,n=i,o=l;break;case 3:r=s,n=f,o=i;break;case 4:r=l,n=s,o=i;break;case 5:r=i,n=s,o=f}return{r:Math.floor(255*r),g:Math.floor(255*n),b:Math.floor(255*o)}}},{key:"rgbToHsv",value:function(e){var t=e.r/255,r=e.g/255,n=e.b/255,o=Math.min(Math.min(t,r),n),a=Math.max(Math.max(t,r),n),i=0,u=0;o!==a&&(i=60*((t===o?3:r===o?5:1)-(t===o?r-n:r===o?n-t:t-r)/(a-o))%360,u=(a-o)/a);return{h:i,s:u,v:a}}},{key:"mixRgb",value:function(e,t,r){if(r<=0)return e;if(r>=1)return t;var n=1-r;return{r:n*e.r+r*t.r,g:n*e.g+r*t.g,b:n*e.b+r*t.b}}},{key:"RGB_BLACK",get:function(){return{r:0,g:0,b:0}}},{key:"RGB_WHITE",get:function(){return{r:255,g:255,b:255}}}]),e}();e.exports=n},2:function(e,t,r){function n(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}var o=r(12),a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return function(e,t,r){t&&n(e.prototype,t),r&&n(e,r)}(e,null,[{key:"toNumber",value:function(e){if("number"==typeof e)return Number.isNaN(e)?0:e;var t=Number(e);return Number.isNaN(t)?0:t}},{key:"toBoolean",value:function(e){return"boolean"==typeof e?e:"string"==typeof e?""!==e&&"0"!==e&&"false"!==e.toLowerCase():Boolean(e)}},{key:"toString",value:function(e){return String(e)}},{key:"toRgbColorList",value:function(t){var r=e.toRgbColorObject(t);return[r.r,r.g,r.b]}},{key:"toRgbColorObject",value:function(t){return"string"==typeof t&&"#"===t.substring(0,1)?o.hexToRgb(t):o.decimalToRgb(e.toNumber(t))}},{key:"isWhiteSpace",value:function(e){return null===e||"string"==typeof e&&0===e.trim().length}},{key:"compare",value:function(t,r){var n=Number(t),o=Number(r);if(0===n&&e.isWhiteSpace(t)?n=NaN:0===o&&e.isWhiteSpace(r)&&(o=NaN),isNaN(n)||isNaN(o)){var a=String(t).toLowerCase(),i=String(r).toLowerCase();return a<i?-1:a>i?1:0}return n===1/0&&o===1/0||n===-1/0&&o===-1/0?0:n-o}},{key:"isInt",value:function(e){return"number"==typeof e?!!isNaN(e)||e===parseInt(e,10):"boolean"==typeof e||"string"==typeof e&&e.indexOf(".")<0}},{key:"toListIndex",value:function(t,r,n){if("number"!=typeof t){if("all"===t)return n?e.LIST_ALL:e.LIST_INVALID;if("last"===t)return r>0?r:e.LIST_INVALID;if("random"===t||"any"===t)return r>0?1+Math.floor(Math.random()*r):e.LIST_INVALID}return(t=Math.floor(e.toNumber(t)))<1||t>r?e.LIST_INVALID:t}},{key:"LIST_INVALID",get:function(){return"INVALID"}},{key:"LIST_ALL",get:function(){return"ALL"}}]),e}();e.exports=a},208:function(e,t,r){var n;function o(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function a(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i=r(10),u=r(11),c=r(2),s=function(e){return e.default},f=(a(n={},"SPACE","space"),a(n,"LEFT","left arrow"),a(n,"UP","up arrow"),a(n,"RIGHT","right arrow"),a(n,"DOWN","down arrow"),n),l=function(){function e(t,r){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.runtime=t,s=r,this.frameToggle=!1,setInterval(function(){n.frameToggle=!n.frameToggle},this.runtime.currentStepTime),this.keyPressed=this.keyPressed.bind(this),this.runtime.on("KEY_PRESSED",this.keyPressed),this._clearkeyPressBuffer=this._clearkeyPressBuffer.bind(this),this.runtime.on("PROJECT_STOP_ALL",this._clearkeyPressBuffer),this.sequences={},this.keyPressBuffer=[]}return function(e,t,r){t&&o(e.prototype,t),r&&o(e,r)}(e,[{key:"getInfo",value:function(){return{id:"makeymakey",name:"Makey Makey",blockIconURI:"data:image/svg+xml;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHZpZXdCb3g9IjAgMCA0MCA0MCI+PHN0eWxlPi5zdDJ7ZmlsbDpyZWR9LnN0M3tmaWxsOiNlMGUwZTB9LnN0NHtmaWxsOm5vbmU7c3Ryb2tlOiM2NjY7c3Ryb2tlLXdpZHRoOi41O3N0cm9rZS1taXRlcmxpbWl0OjEwfTwvc3R5bGU+PHBhdGggZD0iTTM1IDI4SDVhMSAxIDAgMCAxLTEtMVYxMmMwLS42LjQtMSAxLTFoMzBjLjUgMCAxIC40IDEgMXYxNWMwIC41LS41IDEtMSAxeiIgZmlsbD0iI2ZmZiIgaWQ9IkxheWVyXzYiLz48ZyBpZD0iTGF5ZXJfNCI+PHBhdGggY2xhc3M9InN0MiIgZD0iTTQgMjVoMzJ2Mi43SDR6TTEzIDI0aC0yLjJhMSAxIDAgMCAxLTEtMXYtOS43YzAtLjYuNC0xIDEtMUgxM2MuNiAwIDEgLjQgMSAxVjIzYzAgLjYtLjUgMS0xIDF6Ii8+PHBhdGggY2xhc3M9InN0MiIgZD0iTTYuMSAxOS4zdi0yLjJjMC0uNS40LTEgMS0xaDkuN2MuNSAwIDEgLjUgMSAxdjIuMmMwIC41LS41IDEtMSAxSDcuMWExIDEgMCAwIDEtMS0xeiIvPjxjaXJjbGUgY2xhc3M9InN0MiIgY3g9IjIyLjgiIGN5PSIxOC4yIiByPSIzLjQiLz48Y2lyY2xlIGNsYXNzPSJzdDIiIGN4PSIzMC42IiBjeT0iMTguMiIgcj0iMy40Ii8+PHBhdGggY2xhc3M9InN0MiIgZD0iTTQuMiAyN2gzMS45di43SDQuMnoiLz48L2c+PGcgaWQ9IkxheWVyXzUiPjxjaXJjbGUgY2xhc3M9InN0MyIgY3g9IjIyLjgiIGN5PSIxOC4yIiByPSIyLjMiLz48Y2lyY2xlIGNsYXNzPSJzdDMiIGN4PSIzMC42IiBjeT0iMTguMiIgcj0iMi4zIi8+PHBhdGggY2xhc3M9InN0MyIgZD0iTTEyLjUgMjIuOWgtMS4yYy0uMyAwLS41LS4yLS41LS41VjE0YzAtLjMuMi0uNS41LS41aDEuMmMuMyAwIC41LjIuNS41djguNGMwIC4zLS4yLjUtLjUuNXoiLz48cGF0aCBjbGFzcz0ic3QzIiBkPSJNNy4yIDE4Ljd2LTEuMmMwLS4zLjItLjUuNS0uNWg4LjRjLjMgMCAuNS4yLjUuNXYxLjJjMCAuMy0uMi41LS41LjVINy43Yy0uMyAwLS41LS4yLS41LS41ek00IDI2aDMydjJINHoiLz48L2c+PGcgaWQ9IkxheWVyXzMiPjxwYXRoIGNsYXNzPSJzdDQiIGQ9Ik0zNS4yIDI3LjlINC44YTEgMSAwIDAgMS0xLTFWMTIuMWMwLS42LjUtMSAxLTFoMzAuNWMuNSAwIDEgLjQgMSAxVjI3YTEgMSAwIDAgMS0xLjEuOXoiLz48cGF0aCBjbGFzcz0ic3Q0IiBkPSJNMzUuMiAyNy45SDQuOGExIDEgMCAwIDEtMS0xVjEyLjFjMC0uNi41LTEgMS0xaDMwLjVjLjUgMCAxIC40IDEgMVYyN2ExIDEgMCAwIDEtMS4xLjl6Ii8+PC9nPjwvc3ZnPg==",blocks:[{opcode:"whenMakeyKeyPressed",text:s({id:"makeymakey.whenKeyPressed",default:"when [KEY] key pressed",description:"when a keyboard key is pressed"}),blockType:u.HAT,arguments:{KEY:{type:i.STRING,menu:"KEY",defaultValue:"SPACE"}}},{opcode:"whenCodePressed",text:s({id:"makeymakey.whenKeysPressedInOrder",default:"when [SEQUENCE] pressed in order",description:"when a sequence of keyboard keys is pressed in a specific order"}),blockType:u.HAT,arguments:{SEQUENCE:{type:i.STRING,menu:"SEQUENCE",defaultValue:this.DEFAULT_SEQUENCES[0]}}}],menus:{KEY:{acceptReporters:!0,items:[{text:s({id:"makeymakey.spaceKey",default:"space",description:"The space key on a computer keyboard."}),value:"SPACE"},{text:s({id:"makeymakey.upArrow",default:"up arrow",description:"The up arrow key on a computer keyboard."}),value:"UP"},{text:s({id:"makeymakey.downArrow",default:"down arrow",description:"The down arrow key on a computer keyboard."}),value:"DOWN"},{text:s({id:"makeymakey.rightArrow",default:"right arrow",description:"The right arrow key on a computer keyboard."}),value:"RIGHT"},{text:s({id:"makeymakey.leftArrow",default:"left arrow",description:"The left arrow key on a computer keyboard."}),value:"LEFT"},{text:"w",value:"w"},{text:"a",value:"a"},{text:"s",value:"s"},{text:"d",value:"d"},{text:"f",value:"f"},{text:"g",value:"g"}]},SEQUENCE:{acceptReporters:!0,items:this.buildSequenceMenu(this.DEFAULT_SEQUENCES)}}}}},{key:"buildSequenceMenu",value:function(e){var t=this;return e.map(function(e){return t.getMenuItemForSequenceString(e)})}},{key:"getMenuItemForSequenceString",value:function(e){var t=this,r=e.split(" ");return{text:(r=r.map(function(e){return t.KEY_TEXT_SHORT[e]})).join(" "),value:e}}},{key:"whenMakeyKeyPressed",value:function(e,t){var r=e.KEY;return f[e.KEY]&&(r=f[e.KEY]),t.ioQuery("keyboard","getKeyIsDown",[r])&&this.frameToggle}},{key:"keyPressed",value:function(e){var t=this;e=(e=e.split(" ")[0]).toUpperCase(),this.keyPressBuffer.push(e),this.keyPressBuffer.length>100&&this.keyPressBuffer.shift();var r=function(e){var r=t.sequences[e].array;if(t.keyPressBuffer.length<r.length)return"continue";for(var n=!1,o=t.keyPressBuffer.slice(-1*r.length),a=0;a<r.length;a++)r[a]!==o[a]&&(n=!0);n||(t.sequences[e].completed=!0,setTimeout(function(){t.sequences[e].completed=!1},100))};for(var n in this.sequences)r(n)}},{key:"_clearkeyPressBuffer",value:function(){this.keyPressBuffer=[]}},{key:"addSequence",value:function(e,t){this.sequences.hasOwnProperty(e)||(this.sequences[e]={array:t,completed:!1})}},{key:"whenCodePressed",value:function(e){var t=c.toString(e.SEQUENCE).toUpperCase(),r=t.split(" ");if(!(r.length<2))return this.addSequence(t,r),this.sequences[t].completed}},{key:"KEY_TEXT_SHORT",get:function(){var e;return a(e={},"SPACE",s({id:"makeymakey.spaceKey",default:"space",description:"The space key on a computer keyboard."})),a(e,"LEFT",s({id:"makeymakey.leftArrowShort",default:"left",description:"Short name for the left arrow key on a computer keyboard."})),a(e,"UP",s({id:"makeymakey.upArrowShort",default:"up",description:"Short name for the up arrow key on a computer keyboard."})),a(e,"RIGHT",s({id:"makeymakey.rightArrowShort",default:"right",description:"Short name for the right arrow key on a computer keyboard."})),a(e,"DOWN",s({id:"makeymakey.downArrowShort",default:"down",description:"Short name for the down arrow key on a computer keyboard."})),e}},{key:"DEFAULT_SEQUENCES",get:function(){return["".concat("LEFT"," ").concat("UP"," ").concat("RIGHT"),"".concat("RIGHT"," ").concat("UP"," ").concat("LEFT"),"".concat("LEFT"," ").concat("RIGHT"),"".concat("RIGHT"," ").concat("LEFT"),"".concat("UP"," ").concat("DOWN"),"".concat("DOWN"," ").concat("UP"),"".concat("UP"," ").concat("RIGHT"," ").concat("DOWN"," ").concat("LEFT"),"".concat("UP"," ").concat("LEFT"," ").concat("DOWN"," ").concat("RIGHT"),"".concat("UP"," ").concat("UP"," ").concat("DOWN"," ").concat("DOWN"," ")+"".concat("LEFT"," ").concat("RIGHT"," ").concat("LEFT"," ").concat("RIGHT")]}}]),e}();e.exports=l}})});